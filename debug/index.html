<!DOCTYPE html>
<html>
    <head>
        <Title>Socket experiment</Title>
        <script src="/socket.io/socket.io.js"></script>
    </head>
    <body>
        <div id='chat-window'>
            <div id='output'></div>
            <input id='handle' type='text' placeholder='handle'>
            <input id='message' type='text' placeholder='Message'>
            <button id='send'>Send</button>
        </div>
    </body>
    <script>
        var socket = io.connect('localhost:3001')
        let message = document.getElementById('message');
        let handle = document.getElementById('handle');
        let btn = document.getElementById('send');
        let output = document.getElementById('output');

        btn.addEventListener('click', () => {
            socket.emit('chat_msg', {
                handle: handle.value,
                message: message.value,
                target : 'no'
            });
        });

        socket.on('chat_msg', (chatMessage)=>{
            output.innerHTML += chatMessage.handle + " | " + chatMessage.message;
            output.innerHTML += '<br>';
        })
    </script>
</html>